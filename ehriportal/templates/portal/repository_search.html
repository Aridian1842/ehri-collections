{% extends 'portal/search_base.html' %}

{% load i18n %}
{% load ifsetting_tag %}
{% load highlight %}
{% load getattribute %}
{% load facetparam %}
{% load pagination_tags %}
{% block head_title %}{% trans "Repositories" %}{% endblock %}

{% block body_class %}repositories{% endblock %}

{% block facets %}
    <!-- Begin faceting. -->
    <div class="facet-list">
        {% for attr, pretty in facet_names.items %}
            {% if facets.fields|getattribute:attr %}
            <h4>{% trans "By "|add:pretty %}</h4>
            <dl>
                {% for item, count in facets.fields|getattribute:attr %}
                    {% with attr|facetparam:item as param %}
                        {% include "portal/_item_facet.html" %}
                    {% endwith %}
                {% endfor %}
            </dl>
            {% endif %}
        {% endfor %}
    </div>
    <!-- End faceting -->
{% endblock %}

{% block resultlist %}
    {% for result in page.object_list %}
        {% include "portal/_repository_search_result.html" %}
    {% empty %}
        <p>No results found.</p>
    {% endfor %}
{% endblock %}
